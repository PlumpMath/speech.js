<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>speechjs</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
  <!-- build:css(.tmp) styles/main.css -->
  <link rel="stylesheet" href="styles/main.css">
  <!-- endbuild -->
  <!-- build:js scripts/vendor/modernizr.js -->
  <script src="bower_components/modernizr/modernizr.js"></script>
  <!-- endbuild -->
</head>
<body>

  <div class="container">
    <!--[if lt IE 8]>
    <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <div class="header">
      <ul class="nav nav-pills pull-right">
        <li class="active"><a href="connect.html">Connect</a></li>
        <li><a href="config.html">Config <span class="label label-danger">devs only</span></a></li>
      </ul>
      <h3 class="text-muted">Speech.js</h3>
    </div>
  
<div class="jumbotron">
  <section>
    <h1>Whoa!</h1>
    <!--TODO: near-miss/search match service akin to OpenDNS-->
    <p>Something went teribly wrong while trying to lookup <code id="custom-error">your site</code>!
       Perhaps you misspelled something?
       This IS a pre-alpha stage project, so not much is working....
    </p>
  </section>
  <section id="error" style="display: none">
    <h3>Here's the entry that caused the error:</h3>
    <pre class="well" id="entry"></pre>
  </section>
  <script id="gist" src=""></script>
  <a  id='github' href="https://github.com/SpeechJS/speechjs/issues/new">
    <button type="button" class="btn btn-info btn-large pull-right">
      Create New Issue on GitHub <span class="glyphicon glyphicon-share-alt"></span>
    </button>
  </a>
</div>
<script>
  window.onload = function() {
    //TODO:refactor using URI.js
    //TODO:use listener instead of assigning onload
    $.urlParam = function(name){
      var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);
      return results[1] || 0;
    };

    var name = decodeURIComponent($.urlParam('name'));
    var jsDNS = decodeURIComponent($.urlParam('jsdns'));
    var path = decodeURIComponent($.urlParam('path'));
    var entry =  JSON.parse(decodeURIComponent($.urlParam('entry')));
    $('entry').text(entry);

    if (name) {
      $('#custom-error').text('' + name + '.' + jsDNS);
      $('#entry').text(JSON.stringify(entry,undefined,2));
      $('#error').show();
      $('#github').attr(
          'href',
          'https://github.com/SpeechJS/speechjs/issues/new?title='+
              name +'+navigation+error&body=' +
              encodeURIComponent(JSON.stringify(entry,undefined,2)) +
              '&labels[]=bug'
      );

//        createGist(name, JSON.stringify((entry)));
    }
  };

//  function createGist(name, entry){
//    var gist = {
//      "description": name,
//      "public": true,
//      "files": {
//
//      }
//    };
//    gist.files[name + ".urn"] = { "content": entry}
//    $.post('https://api.github.com/gists',
//        JSON.stringify(gist),
//        function(data) {
//          //https://gist.github.com/anonymous/7326378.js
//          var gistUrl = "https://gist.github.com/anonymous/" + data.id + ".js";
//          $('#gist').attr('src',gistUrl);
//        }
//    );
//  }

</script>
    <div class="footer">
      <ul class="list-inline">
        <li><a href="http://twitter.com/jeremie_parker" target="_blank" title="@jeremie_parker" style="text-decoration:none;"><i class="glyphicon glyphicon-bullhorn"></i></a></li>
        <li><a href="http://github.com/p-j" target="_blank" title="@p-j" style="text-decoration:none;"><i class="glyphicon glyphicon-random"></i></a></li>
        <li><a href="mailto:yawa@jeremie-parker.com" title="yawa@jeremie-parker.com" style="text-decoration:none; color:#E54C3B;"><i class="glyphicon glyphicon-envelope"></i></a></li>
      </ul>
    </div>
  </div>

  <!-- build:js scripts/vendor.js -->
  <!-- bower:js -->
  <script src="bower_components/jquery/jquery.js"></script>
  <!-- endbower -->
  <!-- endbuild -->

  <!-- build:js scripts/main.js -->
  <script data-main="scripts/main" src="bower_components/requirejs/require.js"></script>
  <!-- endbuild -->
</body>
</html>
