(function(n){"use strict";n(function(){function n(n,r,e,u){return t(n).then(r,e,u)}function t(n){var t;return t=n instanceof u?n:c(n)?r(n):o(n)}function r(n){var t=f();try{n.then(function(n){t.resolve(n)},function(n){t.reject(n)},function(n){t.progress(n)})}catch(r){t.reject(r)}return t.promise}function e(t){return n(t,i)}function u(n){this.then=n}function o(n){var r=new u(function(r){try{return t("function"==typeof r?r(n):n)}catch(e){return i(e)}});return r}function i(n){var r=new u(function(r,e){try{return t("function"==typeof e?e(n):i(n))}catch(u){return i(u)}});return r}function f(){function n(n,t,r){return l(n,t,r)}function r(n){return y(t(n))}function e(n){return y(i(n))}function o(n){return p(n)}var c,s,h,a,l,p,y;return s=new u(n),c={then:n,resolve:r,reject:e,progress:o,notify:o,promise:s,resolver:{resolve:r,reject:e,progress:o,notify:o}},h=[],a=[],l=function(n,t,r){var e,u;return e=f(),u="function"==typeof r?function(n){try{e.notify(r(n))}catch(t){e.notify(t)}}:function(n){e.notify(n)},h.push(function(r){r.then(n,t).then(e.resolve,e.reject,u)}),a.push(u),e.promise},p=function(n){return m(a,n),n},y=function(n){return l=n.then,y=t,p=d,m(h,n),a=h=x,n},c}function c(n){return n&&"function"==typeof n.then}function s(t,r,e,u,o){return g(2,arguments),n(t,function(t){function i(n){v(n)}function c(n){y(n)}var s,h,a,l,p,y,v,m,g,d;if(g=t.length>>>0,s=Math.max(0,Math.min(r,g)),a=[],h=g-s+1,l=[],p=f(),s)for(m=p.notify,v=function(n){l.push(n),--h||(y=v=j,p.reject(l))},y=function(n){a.push(n),--s||(y=v=j,p.resolve(a))},d=0;g>d;++d)d in t&&n(t[d],c,i,m);else p.resolve(a);return p.promise.then(e,u,o)})}function h(n,t,r,e){function u(n){return t?t(n[0]):n[0]}return s(n,1,u,r,e)}function a(n,t,r,e){return g(1,arguments),p(n,d).then(t,r,e)}function l(){return p(arguments,d)}function p(t,r){return n(t,function(t){var e,u,o,i,c,s;if(o=u=t.length>>>0,e=[],s=f(),o)for(i=function(t,u){n(t,r).then(function(n){e[u]=n,--o||s.resolve(e)},s.reject)},c=0;u>c;c++)c in t?i(t[c],c):--o;else s.resolve(e);return s.promise})}function y(t,r){var e=b.call(arguments,1);return n(t,function(t){var u;return u=t.length,e[0]=function(t,e,o){return n(t,function(t){return n(e,function(n){return r(t,n,o,u)})})},w.apply(t,e)})}function v(t,r,e){var u=arguments.length>2;return n(t,function(n){return n=u?e:n,r.resolve(n),n},function(n){return r.reject(n),i(n)},function(n){return"function"==typeof r.notify&&r.notify(n),n})}function m(n,t){for(var r,e=0;r=n[e++];)r(t)}function g(n,t){for(var r,e=t.length;e>n;)if(r=t[--e],null!=r&&"function"!=typeof r)throw Error("arg "+e+" must be a function")}function j(){}function d(n){return n}var w,b,x;return n.defer=f,n.resolve=t,n.reject=e,n.join=l,n.all=a,n.map=p,n.reduce=y,n.any=h,n.some=s,n.chain=v,n.isPromise=c,u.prototype={always:function(n,t){return this.then(n,n,t)},otherwise:function(n){return this.then(x,n)},yield:function(n){return this.then(function(){return n})},spread:function(n){return this.then(function(t){return a(t,function(t){return n.apply(x,t)})})}},b=[].slice,w=[].reduce||function(n){var t,r,e,u,o;if(o=0,t=Object(this),u=t.length>>>0,r=arguments,1>=r.length)for(;;){if(o in t){e=t[o++];break}if(++o>=u)throw new TypeError}else e=r[1];for(;u>o;++o)o in t&&(e=n(e,t[o],o,t));return e},n})})("function"==typeof define&&define.amd?define:function(n){"object"==typeof exports?module.exports=n():this.when=n()});
(function(){var g=void 0,i=!0,j=null,l=!1,p,aa=aa||{},r=this;function ba(){}
function s(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ca(a){var b=s(a);return"array"==b||"object"==b&&"number"==typeof a.length}function t(a){return"string"==typeof a}function u(a){return"function"==s(a)}function v(a){return a[da]||(a[da]=++ea)}var da="closure_uid_"+(1E9*Math.random()>>>0),ea=0;function fa(a,b,c){return a.call.apply(a.bind,arguments)}
function ga(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function w(a,b,c){w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fa:ga;return w.apply(j,arguments)}
function ha(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}function x(a,b){var c=a.split("."),d=r;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==g?d[e]=b:d=d[e]?d[e]:d[e]={}}function y(a,b){function c(){}c.prototype=b.prototype;a.L=b.prototype;a.prototype=new c};function ia(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function ja(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function ka(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var la="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ma(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<la.length;f++)c=la[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var A=Array.prototype,na=A.indexOf?function(a,b,c){return A.indexOf.call(a,b,c)}:function(a,b,c){c=c==j?0:0>c?Math.max(0,a.length+c):c;if(t(a))return!t(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},oa=A.forEach?function(a,b,c){A.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=t(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};
function pa(a){var b;a:{b=qa;for(var c=a.length,d=t(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(g,d[e],e,a)){b=e;break a}b=-1}return 0>b?j:t(a)?a.charAt(b):a[b]}function ra(a,b){var c=na(a,b);0<=c&&A.splice.call(a,c,1)}function sa(a){return A.concat.apply(A,arguments)}function ta(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};function ua(){};var B,va,wa,xa;function ya(){return r.navigator?r.navigator.userAgent:j}xa=wa=va=B=l;var za;if(za=ya()){var Aa=r.navigator;B=0==za.indexOf("Opera");va=!B&&-1!=za.indexOf("MSIE");wa=!B&&-1!=za.indexOf("WebKit");xa=!B&&!wa&&"Gecko"==Aa.product}var Ba=B,C=va,D=xa,E=wa,Ca=r.navigator,Da=-1!=(Ca&&Ca.platform||"").indexOf("Mac");function Ea(){var a=r.document;return a?a.documentMode:g}var Fa;
a:{var Ga="",F;if(Ba&&r.opera)var Ha=r.opera.version,Ga="function"==typeof Ha?Ha():Ha;else if(D?F=/rv\:([^\);]+)(\)|;)/:C?F=/MSIE\s+([^\);]+)(\)|;)/:E&&(F=/WebKit\/(\S+)/),F)var Ia=F.exec(ya()),Ga=Ia?Ia[1]:"";if(C){var Ja=Ea();if(Ja>parseFloat(Ga)){Fa=String(Ja);break a}}Fa=Ga}var Ka={};
function G(a){var b;if(!(b=Ka[a])){b=0;for(var c=String(Fa).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",k=d[f]||"",m=RegExp("(\\d*)(\\D*)","g"),I=RegExp("(\\d*)(\\D*)","g");do{var n=m.exec(h)||["","",""],q=I.exec(k)||["","",""];if(0==n[0].length&&0==q[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==n[1].length?0:parseInt(n[1],
10))>(0==q[1].length?0:parseInt(q[1],10))?1:0)||((0==n[2].length)<(0==q[2].length)?-1:(0==n[2].length)>(0==q[2].length)?1:0)||(n[2]<q[2]?-1:n[2]>q[2]?1:0)}while(0==b)}b=Ka[a]=0<=b}return b}var La=r.document,Ma=!La||!C?g:Ea()||("CSS1Compat"==La.compatMode?parseInt(Fa,10):5);function Na(a){if("function"==typeof a.g)return a.g();if(t(a))return a.split("");if(ca(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return ja(a)}function Oa(a){if("function"==typeof a.m)return a.m();if("function"!=typeof a.g){if(ca(a)||t(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return ka(a)}}
function Pa(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ca(a)||t(a))oa(a,b,c);else for(var d=Oa(a),e=Na(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)};function H(a,b){this.i={};this.d=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof H?(c=a.m(),d=a.g()):(c=ka(a),d=ja(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}p=H.prototype;p.a=0;p.Z=0;p.g=function(){Qa(this);for(var a=[],b=0;b<this.d.length;b++)a.push(this.i[this.d[b]]);return a};p.m=function(){Qa(this);return this.d.concat()};p.t=function(a){return J(this.i,a)};
p.remove=function(a){return J(this.i,a)?(delete this.i[a],this.a--,this.Z++,this.d.length>2*this.a&&Qa(this),i):l};function Qa(a){if(a.a!=a.d.length){for(var b=0,c=0;b<a.d.length;){var d=a.d[b];J(a.i,d)&&(a.d[c++]=d);b++}a.d.length=c}if(a.a!=a.d.length){for(var e={},c=b=0;b<a.d.length;)d=a.d[b],J(e,d)||(a.d[c++]=d,e[d]=1),b++;a.d.length=c}}p.get=function(a,b){return J(this.i,a)?this.i[a]:b};p.set=function(a,b){J(this.i,a)||(this.a++,this.d.push(a),this.Z++);this.i[a]=b};p.clone=function(){return new H(this)};
function J(a,b){return Object.prototype.hasOwnProperty.call(a,b)};!D&&!C||C&&C&&9<=Ma||D&&G("1.9.1");C&&G("9");function K(){0!=Ra&&(this.na=Error().stack,Sa[v(this)]=this)}var Ra=0,Sa={};K.prototype.R=l;K.prototype.Q=function(){if(!this.R&&(this.R=i,this.l(),0!=Ra)){var a=v(this);delete Sa[a]}};K.prototype.l=function(){if(this.X)for(;this.X.length;)this.X.shift()()};var Ta=0;function Ua(){}p=Ua.prototype;p.key=0;p.o=l;p.w=l;p.h=function(a,b,c,d,e,f){if(u(a))this.V=i;else if(a&&a.handleEvent&&u(a.handleEvent))this.V=l;else throw Error("Invalid listener argument");this.k=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.G=f;this.w=l;this.key=++Ta;this.o=l};p.handleEvent=function(a){return this.V?this.k.call(this.G||this.src,a):this.k.handleEvent.call(this.k,a)};var Va=!C||C&&9<=Ma,Wa=C&&!G("9");!E||G("528");D&&G("1.9b")||C&&G("8")||Ba&&G("9.5")||E&&G("528");D&&!G("8")||C&&G("9");function L(a,b){this.type=a;this.currentTarget=this.target=b}p=L.prototype;p.l=function(){};p.Q=function(){};p.r=l;p.defaultPrevented=l;p.A=i;p.preventDefault=function(){this.defaultPrevented=i;this.A=l};function Xa(a){Xa[" "](a);return a}Xa[" "]=ba;function M(a,b){a&&this.h(a,b)}y(M,L);p=M.prototype;p.target=j;p.relatedTarget=j;p.offsetX=0;p.offsetY=0;p.clientX=0;p.clientY=0;p.screenX=0;p.screenY=0;p.button=0;p.keyCode=0;p.charCode=0;p.ctrlKey=l;p.altKey=l;p.shiftKey=l;p.metaKey=l;p.ha=l;p.S=j;
p.h=function(a,b){var c=this.type=a.type;L.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(D){var e;a:{try{Xa(d.nodeName);e=i;break a}catch(f){}e=l}e||(d=j)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=E||a.offsetX!==g?a.offsetX:a.layerX;this.offsetY=E||a.offsetY!==g?a.offsetY:a.layerY;this.clientX=a.clientX!==g?a.clientX:a.pageX;this.clientY=a.clientY!==g?a.clientY:a.pageY;this.screenX=a.screenX||
0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.ha=Da?a.metaKey:a.ctrlKey;this.state=a.state;this.S=a;a.defaultPrevented&&this.preventDefault();delete this.r};
p.preventDefault=function(){M.L.preventDefault.call(this);var a=this.S;if(a.preventDefault)a.preventDefault();else if(a.returnValue=l,Wa)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};p.l=function(){};var Ya={},N={},O={},P={};
function Q(a,b,c,d,e){if("array"==s(b)){for(var f=0;f<b.length;f++)Q(a,b[f],c,d,e);return j}a:{if(!b)throw Error("Invalid event type");d=!!d;var h=N;b in h||(h[b]={a:0,e:0});h=h[b];d in h||(h[d]={a:0,e:0},h.a++);var h=h[d],f=v(a),k;h.e++;if(h[f]){k=h[f];for(var m=0;m<k.length;m++)if(h=k[m],h.k==c&&h.G==e){if(h.o)break;k[m].w=l;a=k[m];break a}}else k=h[f]=[],h.a++;m=Za();h=new Ua;h.h(c,m,a,b,d,e);h.w=l;m.src=a;m.k=h;k.push(h);O[f]||(O[f]=[]);O[f].push(h);a.addEventListener?(a==r||!a.customEvent_)&&
a.addEventListener(b,m,d):a.attachEvent(b in P?P[b]:P[b]="on"+b,m);a=h}b=a.key;Ya[b]=a;return b}function Za(){var a=$a,b=Va?function(c){return a.call(b.src,b.k,c)}:function(c){c=a.call(b.src,b.k,c);if(!c)return c};return b}function ab(a,b,c,d,e){if("array"==s(b))for(var f=0;f<b.length;f++)ab(a,b[f],c,d,e);else{d=!!d;a:{f=N;if(b in f&&(f=f[b],d in f&&(f=f[d],a=v(a),f[a]))){a=f[a];break a}a=j}if(a)for(f=0;f<a.length;f++)if(a[f].k==c&&a[f].capture==d&&a[f].G==e){R(a[f].key);break}}}
function R(a){var b=Ya[a];if(!b||b.o)return l;var c=b.src,d=b.type,e=b.proxy,f=b.capture;c.removeEventListener?(c==r||!c.customEvent_)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in P?P[d]:P[d]="on"+d,e);c=v(c);O[c]&&(e=O[c],ra(e,b),0==e.length&&delete O[c]);b.o=i;if(b=N[d][f][c])b.W=i,bb(d,f,c,b);delete Ya[a];return i}
function bb(a,b,c,d){if(!d.z&&d.W){for(var e=0,f=0;e<d.length;e++)d[e].o?d[e].proxy.src=j:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.W=l;0==f&&(delete N[a][b][c],N[a][b].a--,0==N[a][b].a&&(delete N[a][b],N[a].a--),0==N[a].a&&delete N[a])}}function cb(a,b){var c=0,d=b==j;if(a!=j){var e=v(a);if(O[e])for(var e=O[e],f=e.length-1;0<=f;f--){var h=e[f];if(d||b==h.type)R(h.key),c++}}else ia(Ya,function(a,b){R(b);c++});return c}
function S(a,b,c,d,e){var f=1;b=v(b);if(a[b]){var h=--a.e,k=a[b];k.z?k.z++:k.z=1;try{for(var m=k.length,I=0;I<m;I++){var n=k[I];n&&!n.o&&(f&=db(n,e)!==l)}}finally{a.e=Math.max(h,a.e),k.z--,bb(c,d,b,k)}}return Boolean(f)}function db(a,b){a.w&&R(a.key);return a.handleEvent(b)}
function eb(a,b){var c=b.type||b,d=N;if(!(c in d))return i;if(t(b))b=new L(b,a);else if(b instanceof L)b.target=b.target||a;else{var e=b;b=new L(c,a);ma(b,e)}var e=1,f,d=d[c],c=i in d,h;if(c){f=[];for(h=a;h;h=h.J)f.push(h);h=d[i];h.e=h.a;for(var k=f.length-1;!b.r&&0<=k&&h.e;k--)b.currentTarget=f[k],e&=S(h,f[k],b.type,i,b)&&b.A!=l}if(l in d)if(h=d[l],h.e=h.a,c)for(k=0;!b.r&&k<f.length&&h.e;k++)b.currentTarget=f[k],e&=S(h,f[k],b.type,l,b)&&b.A!=l;else for(d=a;!b.r&&d&&h.e;d=d.J)b.currentTarget=d,e&=
S(h,d,b.type,l,b)&&b.A!=l;return Boolean(e)}
function $a(a,b){if(a.o)return i;var c=a.type,d=N;if(!(c in d))return i;var d=d[c],e,f;if(!Va){var h;if(!(h=b))a:{h=["window","event"];for(var k=r;e=h.shift();)if(k[e]!=j)k=k[e];else{h=j;break a}h=k}e=h;h=i in d;k=l in d;if(h){if(0>e.keyCode||e.returnValue!=g)return i;a:{var m=l;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(I){m=i}if(m||e.returnValue==g)e.returnValue=i}}m=new M;m.h(e,this);e=i;try{if(h){for(var n=[],q=m.currentTarget;q;q=q.parentNode)n.push(q);f=d[i];f.e=f.a;for(var z=n.length-1;!m.r&&
0<=z&&f.e;z--)m.currentTarget=n[z],e&=S(f,n[z],c,i,m);if(k){f=d[l];f.e=f.a;for(z=0;!m.r&&z<n.length&&f.e;z++)m.currentTarget=n[z],e&=S(f,n[z],c,l,m)}}else e=db(a,m)}finally{n&&(n.length=0)}return e}c=new M(b,this);return e=db(a,c)};function T(){K.call(this);this.oa={};this.ma=this}y(T,K);T.prototype.customEvent_=i;p=T.prototype;p.J=j;p.addEventListener=function(a,b,c,d){Q(this,a,b,c,d)};p.removeEventListener=function(a,b,c,d){ab(this,a,b,c,d)};p.dispatchEvent=function(a){return eb(this,a)};p.l=function(){T.L.l.call(this);cb(this);this.J=j};function fb(){T.call(this)}y(fb,T);function U(){T.call(this);this.N=this.M=this.O=j}y(U,fb);U.prototype.h=function(){this.O=$("#output");this.M=$("#showdebug");this.N=$("#openFancyWindow");this.M.on("click",w(this.aa,this));this.N.on("click",w(this.ba))};U.prototype.aa=function(a){a.preventDefault();this.O.append("Clicked Log<br>")};U.prototype.ba=function(a){a.preventDefault()};function gb(){T.call(this);this.D=l;this.P=when.defer();var a=w(this.h,this),b;for(b in this)a[b]=u(this[b])?w(this[b],this):this[b];a.la=this;this.ca=new U;return a}var hb;y(gb,fb);p=gb.prototype;p.h=function(a){a=a||ua;if(this.D)return a(),this.P.promise;this.ca.h();this.D=i;a();this.dispatchEvent("init");return this.P.resolve()};p.toString=function(){return"awesome app"};p.ea=function(){return this.D};p.ga=function(a,b,c){return Q(this,a,b,l,c||r)};p.trigger=function(a){return eb(this,a)};
p.ka=function(a){return R(a)};p.ia=function(a){return cb(this,a)};var V=hb||(hb=new gb);var ib=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function jb(a,b,c){this.f=a||j;this.da=!!c}function W(a){if(!a.c&&(a.c=new H,a.a=0,a.f))for(var b=a.f.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=j,f=j;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=X(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}
function kb(a){var b=Oa(a);if("undefined"==typeof b)throw Error("Keys are undefined");var c=new jb(j,0,g);a=Na(a);for(var d=0;d<b.length;d++){var e=b[d],f=a[d];if("array"==s(f)){var h=c;h.remove(e);0<f.length&&(h.f=j,h.c.set(X(h,e),ta(f)),h.a+=f.length)}else c.add(e,f)}return c}p=jb.prototype;p.c=j;p.a=j;p.add=function(a,b){W(this);this.f=j;a=X(this,a);var c=this.c.get(a);c||this.c.set(a,c=[]);c.push(b);this.a++;return this};
p.remove=function(a){W(this);a=X(this,a);return this.c.t(a)?(this.f=j,this.a-=this.c.get(a).length,this.c.remove(a)):l};p.t=function(a){W(this);a=X(this,a);return this.c.t(a)};p.m=function(){W(this);for(var a=this.c.g(),b=this.c.m(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};p.g=function(a){W(this);var b=[];if(a)this.t(a)&&(b=sa(b,this.c.get(X(this,a))));else{a=this.c.g();for(var c=0;c<a.length;c++)b=sa(b,a[c])}return b};
p.set=function(a,b){W(this);this.f=j;a=X(this,a);this.t(a)&&(this.a-=this.c.get(a).length);this.c.set(a,[b]);this.a++;return this};p.get=function(a,b){var c=a?this.g(a):[];return 0<c.length?String(c[0]):b};p.toString=function(){if(this.f)return this.f;if(!this.c)return"";for(var a=[],b=this.c.m(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.g(d),f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}return this.f=a.join("&")};
p.clone=function(){var a=new jb;a.f=this.f;this.c&&(a.c=this.c.clone(),a.a=this.a);return a};function X(a,b){var c=String(b);a.da&&(c=c.toLowerCase());return c}p.extend=function(a){for(var b=0;b<arguments.length;b++)Pa(arguments[b],function(a,b){this.add(b,a)},this)};function lb(){}lb.prototype.v=j;var Y;function mb(){}y(mb,lb);function nb(a){return(a=ob(a))?new ActiveXObject(a):new XMLHttpRequest}function pb(a){var b={};ob(a)&&(b[0]=i,b[1]=i);return b}
function ob(a){if(!a.T&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.T=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.T}Y=new mb;function qb(a){T.call(this);this.headers=new H;this.s=a||j}y(qb,T);var rb=/^https?$/i,sb=[];function tb(a,b,c,d,e,f,h){var k=new qb;sb.push(k);b&&Q(k,"complete",b);Q(k,"ready",ha(ub,k));f&&(k.B=Math.max(0,f));h&&(k.$=h);k.send(a,c,d,e)}function ub(a){a.Q();ra(sb,a)}p=qb.prototype;p.j=l;p.b=j;p.C=j;p.I="";p.fa="";p.u=0;p.n="";p.F=l;p.H=l;p.U=l;p.q=l;p.B=0;p.p=j;p.K="";p.$=l;
p.send=function(a,b,c,d){if(this.b)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+a);b=b?b.toUpperCase():"GET";this.I=a;this.n="";this.u=0;this.fa=b;this.F=l;this.j=i;this.b=this.s?nb(this.s):nb(Y);this.C=this.s?this.s.v||(this.s.v=pb(this.s)):Y.v||(Y.v=pb(Y));this.b.onreadystatechange=w(this.Y,this);try{this.U=i,this.b.open(b,a,i),this.U=l}catch(e){vb(this,e);return}a=c||"";var f=this.headers.clone();d&&Pa(d,function(a,b){f.set(b,a)});d=pa(f.m());c=r.FormData&&
a instanceof r.FormData;"POST"==b&&(!d&&!c)&&f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");Pa(f,function(a,b){this.b.setRequestHeader(b,a)},this);this.K&&(this.b.responseType=this.K);"withCredentials"in this.b&&(this.b.withCredentials=this.$);try{this.p&&(r.clearTimeout(this.p),this.p=j),0<this.B&&(this.p=r.setTimeout(w(this.ja,this),this.B)),this.H=i,this.b.send(a),this.H=l}catch(h){vb(this,h)}};function qa(a){return"content-type"==a.toLowerCase()}
p.ja=function(){"undefined"!=typeof aa&&this.b&&(this.n="Timed out after "+this.B+"ms, aborting",this.u=8,this.dispatchEvent("timeout"),this.abort(8))};function vb(a,b){a.j=l;a.b&&(a.q=i,a.b.abort(),a.q=l);a.n=b;a.u=5;wb(a);xb(a)}function wb(a){a.F||(a.F=i,a.dispatchEvent("complete"),a.dispatchEvent("error"))}p.abort=function(a){this.b&&this.j&&(this.j=l,this.q=i,this.b.abort(),this.q=l,this.u=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xb(this))};
p.l=function(){this.b&&(this.j&&(this.j=l,this.q=i,this.b.abort(),this.q=l),xb(this,i));qb.L.l.call(this)};p.Y=function(){if(this.j&&"undefined"!=typeof aa&&(!this.C[1]||!(4==Z(this)&&2==yb(this))))if(this.H&&4==Z(this))r.setTimeout(w(this.Y,this),0);else if(this.dispatchEvent("readystatechange"),4==Z(this)){this.j=l;try{if(zb(this))this.dispatchEvent("complete"),this.dispatchEvent("success");else{this.u=6;var a;try{a=2<Z(this)?this.b.statusText:""}catch(b){a=""}this.n=a+" ["+yb(this)+"]";wb(this)}}finally{xb(this)}}};
function xb(a,b){if(a.b){var c=a.b,d=a.C[0]?ba:j;a.b=j;a.C=j;a.p&&(r.clearTimeout(a.p),a.p=j);b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){}}}function zb(a){var b=yb(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=i;break a;default:c=l}if(!c){if(b=0===b)a=String(a.I).match(ib)[1]||j,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),b=!rb.test(a?a.toLowerCase():"");c=b}return c}function Z(a){return a.b?a.b.readyState:0}
function yb(a){try{return 2<Z(a)?a.b.status:-1}catch(b){return-1}}function Ab(a){try{if(!a.b)return j;if("response"in a.b)return a.b.response;switch(a.K){case "":case "text":return a.b.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.b)return a.b.mozResponseArrayBuffer}return j}catch(b){return j}};function Bb(a){this.success=l;this.errorMessage=j;var b=typeof a;("object"==b&&a!=j||"function"==b)&&this.extend(a)}Bb.prototype.extend=function(a){ia(a,function(a,c){u(a)||(this[c]=a)},this)};function Cb(a){this.xhr=this.responseRaw=this.httpStatus=j;Bb.call(this,a)}y(Cb,Bb);function Db(a,b,c,d,e,f,h){var k=when.defer(),m=Array.prototype.slice.call(arguments,0);m[1]=function(a){var c=b||ua;a=a.target;var d=new Cb;a&&(d.httpStatus=yb(a),d.success=zb(a),d.responseRaw=Ab(a),d.errorMessage=t(a.n)?a.n:String(a.n),d.xhr=a);d.success?k.resolve(d):k.reject(d);c(d)};m[3]=d?kb(d):d;tb.apply(j,m);return k};x("appOne",V);x("appOne.init",V.h);x("appOne.isReady",V.ea);x("appOne.ajax.send",Db);x("appOne.sync.send",function(){return Db.apply(g,arguments)});x("appOne.listen",V.ga);x("appOne.trigger",V.trigger);x("appOne.unlisten",V.ka);x("appOne.removeAllListeners",V.ia);}).call(this);
